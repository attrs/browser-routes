/*! x-router - attrs */!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("xrouter",[],e):"object"==typeof exports?exports.xrouter=e():t.xrouter=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var r=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>r.length)&&(e=r.length),e-=t.length;var n=r.indexOf(t,e);return n!==-1&&n===e});var n=t.exports=r(1);if(n.initiator.add(r(26)),n.initiator.add(r(28)),n.refresh=function(){return n.connector.refresh.apply(n.connector,arguments)},n.href=function(){return n.connector.href.apply(n.connector,arguments)},"object"==typeof window){var o=function(t,e){var r,n=(window.document||window.ownerDocument).querySelectorAll(e);do for(r=n.length;--r>=0&&n.item(r)!==t;);while(r<0&&(t=t.parentElement));return t};n.get=function(t,e){console.warn("[x-router] xrouter.get is deprecated, use xrouter.find instead");var r=n.find(t,e);return r&&r.xrouter},n.find=function(t,e){if(!t)return null;if("string"==typeof t){var r,n='[data-xrouter-id="'+t+'"]';return e&&1===e.nodeType&&(r=e.closest?e.closest(n):o(e,n)),r=r||(window.document||window.ownerDocument).querySelector(n)}var s=t[0]||t;return s.parentNode?function(){for(;s;){if(s.xrouter)return s;s=s.parentNode}}():void 0},n.scanner=r(29).start(),window.xrouter=n}},function(t,e,r){function n(t,e){return e?"/"===e[0]?e:t?i.resolve(t,e):"/"+e:"/"}function o(t,e){return e?"/"===e.trim()[0]?e:(t||(t="/"),t.endsWith("/")||(t+="/"),i.resolve(t,e)):"/"}function s(t){if(arguments.length&&"string"!=typeof t)return t=t[0]||t,t&&t.parentNode?function(){for(;t;){if(t.xrouter){var e=t.xrouter,r=t.xrouter_rendered_base;return{app:function(){return e},base:function(){return r},element:function(){return t},href:function(){if(!arguments.length)return e.href();var t=[].slice.call(arguments);return t[0]=o(r,t[0]),e.href.apply(e,t)}}}t=t.parentNode}}():console.warn("[x-router] illegal argument: xrouter(node)");var e,r,s,p=u(t),d="true"===h("debug"),m={},g={},v={},y=[];d&&console.debug("app created",t),c.forEach(function(t){p.use(t.call(p))}),p.debug=function(t){return arguments.length?(d=!!t,this):d},p.config=function(t,e){return arguments.length<=1?m[t]:(null===e||void 0===e?delete m[t]:m[t]=e,this)},p.set=function(t,e){return p.config(t,e),this},p.session=function(){return arguments.length?1===arguments.length?g[key]:(void 0===value&&delete g[key],g[key]=value,this):g},p.global=function(){return arguments.length?1===arguments.length?l[key]:(void 0===value&&delete l[key],l[key]=value,this):l},p.params=function(t,e){return arguments.length?1===arguments.length?defparamgs[t]:(void 0===e&&delete v[t],v[t]=e,this):v};var b=function(t,e){e?y[y.length-1]=t:y.push(t),y.length>30&&(y=y.slice(y.length-30))};p.state=function(t){return t=+t||0,y[y.length-1+t]},p.history=function(){return y},p.referer=function(){return e},p.on("writestate",function(t){d&&console.debug("[x-router] writestate",t.detail.href),t.detail.sub||p.fire("subapp.writestate",t.detail,"up",!1)});var w={};return p.on("subapp.writestate",function(t){var e=t.detail.request,r=t.detail.response,n=e.parent,o=e.app,s=w[o.id]=w[o.id]||{};if(s.lastpoint=n&&n.parentURL||s.lastpoint,s.lastpoint){var i=s.lastpoint+e.href;b(i,t.detail.replace),p.fire("writestate",{href:i,subapp:!0,commit:t.detail.commit,replace:t.detail.replace,request:e,response:r})}}),p.prepare=function(t,e){var r={},n=!1,o="string"==typeof t?t:t.url,s=i.parse(o);"string"==typeof t&&(t=null);var u=t&&t.method||"get",h=t&&t.referer,f=t&&t.requesthref,c=t&&t.fullhref,m=t&&t.options,y=t&&t.body,b=v,w=t&&t.global,x={request:{parent:t,app:p,method:u,referer:h,requesthref:f,fullhref:c||o,href:o,url:o,parsed:s,hash:s.hash,query:a.parse(s.query),session:g,global:w||l,options:m||{},body:y,params:b},response:{parent:e,get:function(t){return r[t]},set:function(t,e){return x.response.config(t,e),this},config:function(t,e){return arguments.length?1===arguments.length?r[t]:(null===e||void 0===e?delete r[t]:r[t]=e,this):r},end:function(){var t=x.request,e=x.response;return n?console.warn("[x-router] request '"+t.href+"' already finished."):(n=!0,void p.fire("end",{url:t.url,href:t.href,request:t,response:e}))}}};return d&&console.debug("app build",p.id,x),x},p.href=function(t,e,o){if(!arguments.length)return r;if(!t)return console.error("[x-router] missing 'href'");if("number"==typeof t&&(url+=""),"string"!=typeof t)return console.error("[x-router] argument 'href' must be a string");"boolean"==typeof e&&(o={writestate:e},e=null),"boolean"==typeof o&&(o={writestate:o}),o&&"object"==typeof o||(o={});var i=n(p.state(),t),a=o.force===!0,u=o.writestate!==!1,h=o.replace===!0,f=o.pop===!0;u||(a=!0),p.config("always")===!0&&(a=!0),d&&console.debug("href",t,{href:i,currenthref:r,committedhref:s,force:a,writestate:u,prevstate:p.state()}),a||r!==i&&s!==i||d&&console.debug("ignored",i,r,s);var c=p.prepare(i),l=c.request,m=c.response;return l.requesthref=t,l.referer=r,l.options=o,l.body=e,p.fire("beforerequest",{href:i,request:l,response:m})?(u&&(b(i,h),p.fire("writestate",{href:i,pop:f,replace:h,commit:!1,request:l,response:m})),r=i,p(l,m),p.fire("request",{href:i,request:l,response:m})):d&&console.debug("[x-router] beforerequest event prevented"),this},p.refresh=function(t){if(t=t!==!1){var e=p.state();if(e)return p.href(e,null,{force:!0})}else if(r)return p.href(r,null,{force:!0})},p.on("end",function(t){var e=t.detail.href,r=t.detail.request,n=t.detail.response,o=r.options.writestate!==!1;o&&(s=e,b(e,!0),p.fire("writestate",{href:e,commit:!0,replace:!0,request:r,response:n}))}),p.on("replace",function(t){if(d&&console.debug("[x-router] replace",t.detail.previous,"->",t.detail),t.detail.request.app===p){var e=t.detail.request;e.options.writestate!==!1&&(b(t.detail.href,!0),p.fire("writestate",{href:t.detail.href,replace:!0,commit:!1,request:e,response:t.detail.response}))}}),p.listen=function(t){return p.connector=f.connect(p,t),this},p.close=function(){return f.disconnect(p),delete p.connector,this},p}var i=(r(2),r(3)),a=r(7),u=r(10),h=r(19),f=r(20),c=[],l=global.xrouter_globalscope=global.xrouter_globalscope||{};s.connector=f,s.Router=u,s.initiator={add:function(t){return c.push(t),this},remove:function(t){return~c.indexOf(t)&&c.splice(c.indexOf(t),1),this},list:function(){return c}},t.exports=s},function(t,e){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return o.exec(t).slice(1)};e.resolve=function(){for(var t="",e=!1,o=arguments.length-1;o>=-1&&!e;o--){var s=o>=0?arguments[o]:process.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,e="/"===s.charAt(0))}return t=r(n(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===i(t,-1);return t=r(n(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var o=n(t.split("/")),s=n(r.split("/")),i=Math.min(o.length,s.length),a=i,u=0;u<i;u++)if(o[u]!==s[u]){a=u;break}for(var h=[],u=a;u<o.length;u++)h.push("..");return h=h.concat(s.slice(a)),h.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=s(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=s(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return s(t)[3]};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}},function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&h.isObject(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function s(t){return h.isString(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function i(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}var u=r(4),h=r(6);e.parse=o,e.resolve=i,e.resolveObject=a,e.format=s,e.Url=n;var f=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(d),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},q=r(7);n.prototype.parse=function(t,e,r){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(o),i=/\\/g;s[0]=s[0].replace(i,"/"),t=s.join(o);var a=t;if(a=a.trim(),!r&&1===t.split("#").length){var c=l.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=q.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=f.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(r||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===a.substr(0,2);!A||p&&O[p]||(a=a.substr(2),this.slashes=!0)}if(!O[p]&&(A||p&&!j[p])){for(var E=-1,S=0;S<v.length;S++){var P=a.indexOf(v[S]);P!==-1&&(E===-1||P<E)&&(E=P)}var C,I;I=E===-1?a.lastIndexOf("@"):a.lastIndexOf("@",E),I!==-1&&(C=a.slice(0,I),a=a.slice(I+1),this.auth=decodeURIComponent(C)),E=-1;for(var S=0;S<g.length;S++){var P=a.indexOf(g[S]);P!==-1&&(E===-1||P<E)&&(E=P)}E===-1&&(E=a.length),this.host=a.slice(0,E),a=a.slice(E),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var U=this.hostname.split(/\./),S=0,T=U.length;S<T;S++){var _=U[S];if(_&&!_.match(b)){for(var L="",k=0,N=_.length;k<N;k++)L+=_.charCodeAt(k)>127?"x":_[k];if(!L.match(b)){var $=U.slice(0,S),M=U.slice(S+1),W=_.match(w);W&&($.push(W[1]),M.unshift(W[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=$.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=u.toASCII(this.hostname));var F=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+F,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[d])for(var S=0,T=m.length;S<T;S++){var z=m[S];if(a.indexOf(z)!==-1){var D=encodeURIComponent(z);D===z&&(D=escape(z)),a=a.split(z).join(D)}}var Q=a.indexOf("#");Q!==-1&&(this.hash=a.substr(Q),a=a.slice(0,Q));var K=a.indexOf("?");if(K!==-1?(this.search=a.substr(K),this.query=a.substr(K+1),e&&(this.query=q.parse(this.query)),a=a.slice(0,K)):e&&(this.search="",this.query={}),a&&(this.pathname=a),j[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",X=this.search||"";this.path=F+X}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(s=q.stringify(this.query));var i=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||j[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),i=i.replace("#","%23"),e+o+r+i+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,o=Object.keys(this),s=0;s<o.length;s++){var i=o[s];r[i]=this[i]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var f=a[u];"protocol"!==f&&(r[f]=t[f])}return j[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!j[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var p=c[l];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||O[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",g=r.search||"";r.path=m+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=y||v||r.host&&t.pathname,w=b,x=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],q=r.protocol&&!j[r.protocol];if(q&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===x[0])),y)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),r.search=t.search,r.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(q){r.hostname=r.host=x.shift();var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=t.search,r.query=t.query,h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=x.slice(-1)[0],S=(r.host||t.host||x.length>1)&&("."===E||".."===E)||""===E,P=0,C=x.length;C>=0;C--)E=x[C],"."===E?x.splice(C,1):".."===E?(x.splice(C,1),P++):P&&(x.splice(C,1),P--);if(!b&&!w)for(;P--;P)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),S&&"/"!==x.join("/").substr(-1)&&x.push("");var I=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(q){r.hostname=r.host=I?"":x.length?x.shift():"";var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return b=b||r.host&&x.length,b&&!I&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){var n;(function(t){!function(o){function s(t){throw RangeError(R[t])}function i(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function a(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(I,".");var o=t.split("."),s=i(o,e).join(".");return n+s}function u(t){for(var e,r,n=[],o=0,s=t.length;o<s;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<s?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function h(t){return i(t,function(t){var e="";return t>65535&&(t-=65536,e+=_(t>>>10&1023|55296),t=56320|1023&t),e+=_(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,r){var n=0;for(t=r?T(t/q):t>>1,t+=T(t/e);t>U*O>>1;n+=w)t=T(t/U);return T(n+(U+1)*t/(t+j))}function p(t){var e,r,n,o,i,a,u,c,p,d,m=[],g=t.length,v=0,y=E,j=A;for(r=t.lastIndexOf(S),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&s("not-basic"),m.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(i=v,a=1,u=w;o>=g&&s("invalid-input"),c=f(t.charCodeAt(o++)),(c>=w||c>T((b-v)/a))&&s("overflow"),v+=c*a,p=u<=j?x:u>=j+O?O:u-j,!(c<p);u+=w)d=w-p,a>T(b/d)&&s("overflow"),a*=d;e=m.length+1,j=l(v-i,e,0==i),T(v/e)>b-y&&s("overflow"),y+=T(v/e),v%=e,m.splice(v++,0,y)}return h(m)}function d(t){var e,r,n,o,i,a,h,f,p,d,m,g,v,y,j,q=[];for(t=u(t),g=t.length,e=E,r=0,i=A,a=0;a<g;++a)m=t[a],m<128&&q.push(_(m));for(n=o=q.length,o&&q.push(S);n<g;){for(h=b,a=0;a<g;++a)m=t[a],m>=e&&m<h&&(h=m);for(v=n+1,h-e>T((b-r)/v)&&s("overflow"),r+=(h-e)*v,e=h,a=0;a<g;++a)if(m=t[a],m<e&&++r>b&&s("overflow"),m==e){for(f=r,p=w;d=p<=i?x:p>=i+O?O:p-i,!(f<d);p+=w)j=f-d,y=w-d,q.push(_(c(d+j%y,0))),f=T(j/y);q.push(_(c(f,0))),i=l(r,v,n==o),r=0,++n}++r,++e}return q.join("")}function m(t){return a(t,function(t){return P.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return C.test(t)?"xn--"+d(t):t})}var v=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof global&&global);v.global!==v&&v.window!==v&&v.self!==v||(o=v);var y,b=2147483647,w=36,x=1,O=26,j=38,q=700,A=72,E=128,S="-",P=/^xn--/,C=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=w-x,T=Math.floor,_=String.fromCharCode;y={version:"1.3.2",ucs2:{decode:u,encode:h},decode:p,encode:d,toASCII:g,toUnicode:m},n=function(){return y}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(5)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(8),e.encode=e.stringify=r(9)},function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var i=/\+/g;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var h=0;h<u;++h){var f,c,l,p,d=t[h].replace(i,"%20"),m=d.indexOf(n);m>=0?(f=d.substr(0,m),c=d.substr(m+1)):(f=d,c=""),l=decodeURIComponent(f),p=decodeURIComponent(c),r(s,l)?Array.isArray(s[l])?s[l].push(p):s[l]=[s[l],p]:s[l]=p}return s}},function(t,e){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,o){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var s=encodeURIComponent(r(o))+n;return Array.isArray(t[o])?t[o].map(function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[o]))}).join(e):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(t)):""}},function(t,e,r){function n(t,e){return t.indexOf(e,t.length-e.length)!==-1}function o(t,e){var r=f.fromString(t),n=f.fromString(t+"/*after");return{match:function(o){if("/"===t&&e)return!0;if(r.matches(o))return r.match(o).namedParams;if(e&&n.matches(o)){var s=n.match(o).namedParams;return delete s.after,s}return!1},matches:function(t){return!!pattern.matches(t)||!(!e||!n.matches(t))}}}function s(t,e){if("/"===t[0]&&(t=t.substring(1)),"/"===e[0]&&(e=e.substring(1)),n(t,"/")&&(t=t.substring(0,t.length-1)),n(e,"/")&&(e=e.substring(0,e.length-1)),!t)return{sub:"/"+e,parent:""};for(;~t.indexOf("//");)t.split("//").join("/");for(;~e.indexOf("//");)e.split("//").join("/");t=t.split("/"),e=e.split("/");for(var r=[],o=[],s=0;s<e.length;s++){if(t[s]&&":"!==t[s][0]&&e[s]!==t[s])return null;s>=t.length?r.push(e[s]):o.push(e[s])}return{parent:"/"+o.join("/"),sub:"/"+r.join("/")}}function i(){var t={};return[].forEach.call(arguments,function(e){if(e&&"object"==typeof e)for(var r in e)t[r]=e[r]}),t}function a(t){t=t||l++;var e=!0,r=[],n=function(o,a,f){o=o||{},a=a||{};if("function"==typeof n.prepare){var c=n.prepare(o,a);o=c.request,a=c.response}var l=o.parentURL=o.parentURL||"",d=o.url=o.url||"/",m=o.href=o.href||o.url,g=o.params=o.params||{},v=!1;o._routes=o._routes||[],o._routes.splice(0,0,n);var y=function(r){return v?console.error("next function twice called.",t,r):(v=!0,e=!1,o.parentURL=l,o.url=d,o.href=m,o.params=g,r?(p.fire("error",{router:n,href:o.href,url:o.url,request:o,response:a,error:r},o._routes),f&&f(r)):(p.fire("notfound",{router:n,href:o.href,url:o.url,request:o,response:a}),void(f&&f())))},b=0,w=function(t){if(t)return y(t);var f=r[b++];if(!f)return y();if(!e&&"boot"===f.type)return w();var c=f.fn,m=(f.type,f.path),v=f.pattern&&f.pattern.match(o.url);if(!v)return w();if(o.params=i(g,v),o.parentURL=l,o.url=d,o.boot=e,"string"==typeof c){if("/"==c[0]||"."==c[0])return console.error("[tinyrouter] illegal replace url",c);var x=o.href;return o.url=d="/"+c,o.href=u.join(l||"/",c),p.fire("replace",{router:n,previous:x,href:o.href,url:o.url,request:o,response:a},o._routes),w()}if(c.__router__||c.Routable){var O=s(m,h.parse(o.url).pathname);o.parentURL=O.parent?u.join(l,O.parent):l,o.url=o.url.substring(O.parent.length)}p.fire("route",{router:n,config:f,href:o.href,url:o.url,request:o,response:a},o._routes),f.fn.apply(n,[o,a,w])};w()};n.Routable=!0,n.id=t,n.exists=function(t){var e=!1;return r.forEach(function(r){if(!e)if("get"===r.type){var n=r.pattern.match(t);n&&(e=!0)}else"use"===r.type&&(e=r.fn.exists(t.substring(r.path.length)))}),e};var a=function(t){var e=t.fn;if(e&&e===n)throw new Error("cannot add router itself: "+e.id);(e.__router__||e.Routable)&&(e.connect&&e.connect(n,"up"),p.connect(e,"down"),e.fire&&e.fire("add",{parent:n})),r.push(t),p.fire("addchild",{child:t}),p.fire("subtree",{router:n,added:t},"up")},f=function(t){var e=t.fn;e&&(e.disconnect&&e.disconnect(n),p.disconnect(t.fn),e.fire&&e.fire("remove",{parent:n})),r.splice(r.indexOf(t),1),p.fire("removechild",{child:t}),p.fire("subtree",{router:n,removed:t},"up")};n.use=function(t,e){if("function"==typeof t&&(e=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of path:"+typeof t);return a({type:"use",path:t||"/",pattern:o(t,!0),fn:e}),this},n.get=function(t,e){if("function"==typeof t&&(e=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of path:"+typeof t);return a({type:"get",path:t||"/",pattern:o(t),fn:e}),this},n.boot=function(t,e){if("function"==typeof t&&(e=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of path:"+typeof t);return a({type:"boot",path:t||"/",pattern:o(t,!0),fn:e}),this},n.notfound=function(t){return n.on("notfound",t),this},n.error=function(t){return n.on("error",t),this},n.drop=n.remove=function(t){var e=[];return r.forEach(function(r){r.fn===t&&e.push(r)}),e.forEach(function(t){f(t)}),this},n.clear=function(){return r.forEach(function(t){f(t)}),r=[],p.fire("clear",{},"up"),this};var p=c(n);return n.on=function(t,e){return p.on.apply(p,arguments),this},n.once=function(t,e){return p.once.apply(p,arguments),this},n.off=function(t,e){return p.off.apply(p,arguments),this},n.fire=function(t,e,r,n){return p.fire.apply(p,arguments)},n.connect=function(t,e){return p.connect(t,e),this},n.disconnect=function(t){return p.disconnect(t),this},n.hasListener=function(t){return p.has.apply(p,arguments)},n}var u=r(2),h=r(11),f=r(17),c=r(18);Array.prototype.forEach||(Array.prototype.forEach=function(t){for(var e=0;e<this.length;e++)t.apply(this,[this[e],e,this])}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var r=e||0;r<this.length;r++)if(this[r]==t)return r;return-1});var l=0;t.exports=a},function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&h.isObject(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function s(t){return h.isString(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function i(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}var u=r(12),h=r(13);e.parse=o,e.resolve=i,e.resolveObject=a,e.format=s,e.Url=n;var f=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(d),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},q=r(14);n.prototype.parse=function(t,e,r){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(o),i=/\\/g;s[0]=s[0].replace(i,"/"),t=s.join(o);var a=t;if(a=a.trim(),!r&&1===t.split("#").length){var c=l.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=q.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=f.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(r||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===a.substr(0,2);!A||p&&O[p]||(a=a.substr(2),this.slashes=!0)}if(!O[p]&&(A||p&&!j[p])){for(var E=-1,S=0;S<v.length;S++){var P=a.indexOf(v[S]);P!==-1&&(E===-1||P<E)&&(E=P)}var C,I;I=E===-1?a.lastIndexOf("@"):a.lastIndexOf("@",E),I!==-1&&(C=a.slice(0,I),a=a.slice(I+1),this.auth=decodeURIComponent(C)),E=-1;for(var S=0;S<g.length;S++){var P=a.indexOf(g[S]);P!==-1&&(E===-1||P<E)&&(E=P)}E===-1&&(E=a.length),this.host=a.slice(0,E),a=a.slice(E),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var U=this.hostname.split(/\./),S=0,T=U.length;S<T;S++){var _=U[S];if(_&&!_.match(b)){for(var L="",k=0,N=_.length;k<N;k++)L+=_.charCodeAt(k)>127?"x":_[k];if(!L.match(b)){var $=U.slice(0,S),M=U.slice(S+1),W=_.match(w);W&&($.push(W[1]),M.unshift(W[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=$.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=u.toASCII(this.hostname));var F=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+F,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[d])for(var S=0,T=m.length;S<T;S++){var z=m[S];if(a.indexOf(z)!==-1){var D=encodeURIComponent(z);D===z&&(D=escape(z)),a=a.split(z).join(D)}}var Q=a.indexOf("#");Q!==-1&&(this.hash=a.substr(Q),a=a.slice(0,Q));var K=a.indexOf("?");if(K!==-1?(this.search=a.substr(K),this.query=a.substr(K+1),e&&(this.query=q.parse(this.query)),a=a.slice(0,K)):e&&(this.search="",this.query={}),a&&(this.pathname=a),j[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",X=this.search||"";this.path=F+X}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(s=q.stringify(this.query));var i=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||j[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),i=i.replace("#","%23"),e+o+r+i+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,o=Object.keys(this),s=0;s<o.length;s++){var i=o[s];r[i]=this[i]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var f=a[u];"protocol"!==f&&(r[f]=t[f])}return j[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!j[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var p=c[l];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||O[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",g=r.search||"";r.path=m+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=y||v||r.host&&t.pathname,w=b,x=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],q=r.protocol&&!j[r.protocol];if(q&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===x[0])),y)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),r.search=t.search,r.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(q){r.hostname=r.host=x.shift();var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=t.search,r.query=t.query,h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=x.slice(-1)[0],S=(r.host||t.host||x.length>1)&&("."===E||".."===E)||""===E,P=0,C=x.length;C>=0;C--)E=x[C],"."===E?x.splice(C,1):".."===E?(x.splice(C,1),P++):P&&(x.splice(C,1),P--);if(!b&&!w)for(;P--;P)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),S&&"/"!==x.join("/").substr(-1)&&x.push("");var I=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(q){r.hostname=r.host=I?"":x.length?x.shift():"";var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");
A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return b=b||r.host&&x.length,b&&!I&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){var n;(function(t){!function(o){function s(t){throw RangeError(R[t])}function i(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function a(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(I,".");var o=t.split("."),s=i(o,e).join(".");return n+s}function u(t){for(var e,r,n=[],o=0,s=t.length;o<s;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<s?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function h(t){return i(t,function(t){var e="";return t>65535&&(t-=65536,e+=_(t>>>10&1023|55296),t=56320|1023&t),e+=_(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,r){var n=0;for(t=r?T(t/q):t>>1,t+=T(t/e);t>U*O>>1;n+=w)t=T(t/U);return T(n+(U+1)*t/(t+j))}function p(t){var e,r,n,o,i,a,u,c,p,d,m=[],g=t.length,v=0,y=E,j=A;for(r=t.lastIndexOf(S),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&s("not-basic"),m.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(i=v,a=1,u=w;o>=g&&s("invalid-input"),c=f(t.charCodeAt(o++)),(c>=w||c>T((b-v)/a))&&s("overflow"),v+=c*a,p=u<=j?x:u>=j+O?O:u-j,!(c<p);u+=w)d=w-p,a>T(b/d)&&s("overflow"),a*=d;e=m.length+1,j=l(v-i,e,0==i),T(v/e)>b-y&&s("overflow"),y+=T(v/e),v%=e,m.splice(v++,0,y)}return h(m)}function d(t){var e,r,n,o,i,a,h,f,p,d,m,g,v,y,j,q=[];for(t=u(t),g=t.length,e=E,r=0,i=A,a=0;a<g;++a)m=t[a],m<128&&q.push(_(m));for(n=o=q.length,o&&q.push(S);n<g;){for(h=b,a=0;a<g;++a)m=t[a],m>=e&&m<h&&(h=m);for(v=n+1,h-e>T((b-r)/v)&&s("overflow"),r+=(h-e)*v,e=h,a=0;a<g;++a)if(m=t[a],m<e&&++r>b&&s("overflow"),m==e){for(f=r,p=w;d=p<=i?x:p>=i+O?O:p-i,!(f<d);p+=w)j=f-d,y=w-d,q.push(_(c(d+j%y,0))),f=T(j/y);q.push(_(c(f,0))),i=l(r,v,n==o),r=0,++n}++r,++e}return q.join("")}function m(t){return a(t,function(t){return P.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return C.test(t)?"xn--"+d(t):t})}var v=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof global&&global);v.global!==v&&v.window!==v&&v.self!==v||(o=v);var y,b=2147483647,w=36,x=1,O=26,j=38,q=700,A=72,E=128,S="-",P=/^xn--/,C=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=w-x,T=Math.floor,_=String.fromCharCode;y={version:"1.3.2",ucs2:{decode:u,encode:h},decode:p,encode:d,toASCII:g,toUnicode:m},n=function(){return y}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(5)(t))},function(t,e){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(15),e.encode=e.stringify=r(16)},function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var i=/\+/g;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var h=0;h<u;++h){var f,c,l,p,d=t[h].replace(i,"%20"),m=d.indexOf(n);m>=0?(f=d.substr(0,m),c=d.substr(m+1)):(f=d,c=""),l=decodeURIComponent(f),p=decodeURIComponent(c),r(s,l)?Array.isArray(s[l])?s[l].push(p):s[l]=[s[l],p]:s[l]=p}return s}},function(t,e){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,o){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var s=encodeURIComponent(r(o))+n;return Array.isArray(t[o])?t[o].map(function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[o]))}).join(e):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(t)):""}},function(t,e,r){function n(){return[].slice.call(arguments).reduce(function(t,e){for(var r in e)t[r]=e[r];return t},{})}function o(t){var e=/([^\?#]*)?(\?[^#]*)?(#.*)?$/,r=e.exec(t);return{path:r[1]||"",queryString:r[2]&&r[2].substring(1)||"",hash:r[3]&&r[3].substring(1)||""}}var s=r(14),i=function(){function t(t){this.params=t.params,this.allowWildcards=t.allowWildcards,this.routeString=t.routeString}return t.prototype.matches=function(t){for(var e,r=(t||"").split("&").reduce(function(t,e){var r=e.split("="),n=r[0],o=r[1];return n&&(t[n]=o),t},{}),n=[].concat(this.params);e=n.shift();){if(!r.hasOwnProperty(e.key))return!1;if(e.value&&r[e.key]!=e.value)return!1}return!(!this.allowWildcards&&this.params.length&&Object.getOwnPropertyNames(r).length>this.params.length)},t.prototype.match=function(t){if(!this.matches(t))return null;var e={params:[],namedParams:{},namedQueryParams:{}};if(!t)return e;var r=this.params.reduce(function(t,e){return t[e.key]=e.name,t},{}),n=s.parse(t);return Object.keys(n).forEach(function(t){var o=n[t];e.params.push(o),r[t]&&(e.namedQueryParams[r[t]]=e.namedParams[r[t]]=o)}),e},t.fromString=function(e){var r={routeString:e,allowWildcards:!1,params:[]};return e.split("&").forEach(function(t){if(t){var e=t.split("="),n=e[0],o=e[1]||"",s=!1,i={key:n};":"==o.charAt(0)?i.name=o.substring(1):"*"==n&&""==o?s=r.allowWildcards=!0:i.value=o,s||r.params.push(i)}}),new t(r)},t}(),a=function(){function t(t){this.regexp=t.regexp,this.params=t.params,this.routeString=t.routeString}var e=/:\w+/g,r=/\*\w+/g,n=/(:[^\/\.]+)|(\*\w+)/g,o=/\*/g,s=/[-[\]{}()+?.,\\^$|#\s]/g;return t.prototype.matches=function(t){return this.regexp.test(t)},t.prototype.match=function(t){if(!this.matches(t))return null;var e={params:[],namedParams:{}};return(this.regexp.exec(t)||[]).slice(1).forEach(function(t,r){void 0!==t&&(t=decodeURIComponent(t)),e.namedParams[this.params[r]]=t,e.params.push(t)},this),e},t.routePathToRegexp=function(t){return t=t.replace(s,"\\$&").replace(e,"([^/]+)").replace(r,"(.*)?").replace(o,".*?").replace(/\/?$/,"/?"),new RegExp("^/?"+t+"$")},t.fromString=function(e){e=e.split(/\?|#/)[0];var r={routeString:e,regexp:t.routePathToRegexp(e),params:(e.match(n)||[]).map(function(t){return t.substring(1)})};return new t(r)},t}(),u=function(){function t(t){this.regex=t}return t.prototype.matches=function(t){return this.regex.test(t)},t.prototype.match=function(t){if(!this.matches(t))return null;var e=o(t);return{params:this.regex.exec(t).slice(1),queryParams:s.parse(e.queryString),namedParams:{}}},t}(),h=function(){function t(t){this.pathPattern=t.pathPattern,this.queryStringPattern=t.queryStringPattern,this.hashPattern=t.hashPattern,this.routeString=t.routeString}return t.prototype.matches=function(t){var e=o(t);return(!this.pathPattern||this.pathPattern.matches(e.path))&&(!this.queryStringPattern||this.queryStringPattern.matches(e.queryString))&&(!this.hashPattern||this.hashPattern.matches(e.hash))},t.prototype.match=function(t){if(!this.matches(t))return null;var e,r,i=o(t),a={params:[],namedParams:{},pathParams:{},queryParams:s.parse(i.queryString),namedQueryParams:{},hashParams:{}},u=function(t){a.params=a.params.concat(t.params),a.namedParams=n(a.namedParams,t.namedParams)};return(r=this.pathPattern)&&(e=r.match(i.path),e&&u(e),a.pathParams=e?e.namedParams:{}),(r=this.queryStringPattern)&&(e=r.match(i.queryString),e&&u(e),a.namedQueryParams=e?e.namedQueryParams:{}),(r=this.hashPattern)&&(e=r.match(i.hash),e&&u(e),a.hashParams=e?e.namedParams:{}),a},t.fromString=function(e){var r=o(e),n=r.path,s=r.queryString||e.indexOf("?")>-1,u=r.hash||e.indexOf("#")>-1;return new t({pathPattern:n&&a.fromString(r.path),queryStringPattern:s&&i.fromString(r.queryString),hashPattern:u&&a.fromString(r.hash),routeString:e})},t}();t.exports=h,h.QueryStringPattern=i,h.PathPattern=a,h.RegExpPattern=u},function(t,e){function r(t,e,r,n){this.type=t,this.detail=e||{},this.target=this.currentTarget=r,this.cancelable=n===!0,this.defaultPrevented=!1,this.stopped=!1,this.timeStamp=(new Date).getTime()}Array.prototype.every||(Array.prototype.every=function(t,e){var r,n;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError;for(arguments.length>1&&(r=e),n=0;n<s;){var i;if(n in o){i=o[n];var a=t.call(r,i,n,o);if(!a)return!1}n++}return!0}),r.prototype={preventDefault:function(){this.cancelable&&(this.defaultPrevented=!0)},stopPropagation:function(){this.stopped=!0},stopImmediatePropagation:function(){this.stoppedImmediate=!0}},r.createEvent=function(t,e,n,o){return new r(t,e,n,o)},t.exports=function(t){var e={},n=!1,o=[],s=function(t,r){if(!t||"string"!=typeof t)return console.error("type must be a string");if("function"!=typeof r)return console.error("listener must be a function");var n=t.split(" ");return n.forEach(function(t){e[t]=e[t]||[],e[t].push(r)}),this},i=function(t,e){if(!t||"string"!=typeof t)return console.error("type must be a string");if("function"!=typeof e)return console.error("listener must be a function");var r=t.split(" ");return r.forEach(function(t){if(t){var r=function(n){return a(t,r),e.call(this,n)};s(t,r)}}),this},a=function(t,r){if(!t||"string"!=typeof t)return console.error("type must be a string");if("function"!=typeof r)return console.error("listener must be a function");var n=t.split(" ");return n.forEach(function(t){var n=e[t];if(n)for(var o;~(o=n.indexOf(r));)n.splice(o,1)}),this},u=function(t){if("function"==typeof t){var r=!1;return e.forEach(function(e){r||e===t&&(r=!0)}),r}return!(!e[t]||!e[t].length)},h=function(s,i,a,u){if(!n){var h;s&&s.type||s;if("string"==typeof s)h=r.createEvent(s,i,t);else{if(!(s instanceof r))return console.error("illegal arguments, type is must be a string or event",s);h=s}h.currentTarget=t;var f=!1,c=!1,l=!1,p=function(e){f||(e.call(t,h),h.defaultPrevented===!0&&(l=!0),h.stopped===!0&&(c=!0),h.stoppedImmediate===!0&&(f=!0,c=!0))};return a&&u===!1||((e["*"]||[]).slice().reverse().forEach(p),(e[h.type]||[]).slice().reverse().forEach(p)),a&&!c&&(l=!o.every(function(t){return!t.target.fire||"both"!==a&&t.direction!==a||t.target.fire(s,i,a)})),!l}},f=function(){return e=null,this},c=function(){return n=!0,this},l=function(){return n=!1,this},p=function(t,e){return t?~["up","down"].indexOf(e)?(o.push({target:t,direction:e}),this):console.warn('illegal argument: direction must be "up" or "down" but ',e):console.warn("illegal argument: target cannot be null",t)},d=function(t){if(!node)return this;var e=[];return o.forEach(function(r){r.target===t&&e.push(r)}),e.forEach(function(t){o.splice(o.indexOf(t),1)}),this};return{on:s,once:i,off:a,fire:h,has:u,destroy:f,pause:c,resume:l,connect:p,disconnect:d}}},function(t,e){t.exports=function(t,e){if("object"==typeof document&&document.head){var r=document.head.querySelector('meta[name="xrouter.'+t+'"]');return r&&r.getAttribute("content")||e||null}return e||null}},function(t,e,r){var n,o=r(21),s=r(19),i="true"===s("debug"),a=s("mode"),u=[],h=[],f=t.exports={},c=o(f);f.types={pushstate:r(22),hashbang:r(24)("!"),hash:r(24)(),auto:r(25)},f.href=function(t,e,r){if(!arguments.length)return n;var o=arguments;return u.forEach(function(t){t.href.apply(t,o)}),this},f.refresh=function(t){var e=arguments;return u.forEach(function(t){t.refresh.apply(t,e)}),this},f.instances=function(){return u.slice()},f.connect=function(t,e){if(!t)return console.error("missing argument:app");if(~u.indexOf(t))return console.error("already listening",t.id);e=e||{};var r=e.mode||a||"auto";i&&console.debug("[x-router] mode:",r);var n=this.types[r];n||(console.warn("[x-router] unsupported mode: ",r),n=this.types.auto);var o=n(t,f);return u.push(t),h.push(o),o},f.disconnect=function(t){var e=u.indexOf(t);return~e&&(h[e].disconnect(),h.splice(e,1)),~e&&u.splice(e,1),this},f.on=function(t,e){return c.on(t,e),this},f.once=function(t,e){return c.once(t,e),this},f.off=function(t,e){return c.off(t,e),this},f.fire=function(t,e){return"writestate"===t&&(n=e.href),c.fire(t,e),this}},function(t,e){function r(t,e,r,n){this.type=t,this.detail=e||{},this.target=this.currentTarget=r,this.cancelable=n===!0,this.defaultPrevented=!1,this.stopped=!1,this.timeStamp=(new Date).getTime()}Array.prototype.every||(Array.prototype.every=function(t,e){var r,n;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError;for(arguments.length>1&&(r=e),n=0;n<s;){var i;if(n in o){i=o[n];var a=t.call(r,i,n,o);if(!a)return!1}n++}return!0}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),r.prototype={preventDefault:function(){this.cancelable&&(this.defaultPrevented=!0)},stopPropagation:function(){this.stopped=!0},stopImmediatePropagation:function(){this.stoppedImmediate=!0,this.stopped=!0}},r.createEvent=function(t,e,n,o){return new r(t,e,n,o)},t.exports=function(t){var e={},n=!1,o=function(t,r){if(!t||"string"!=typeof t)return console.error("type must be a string");if("function"!=typeof r)return console.error("listener must be a function");var n=t.split(" ");return n.forEach(function(t){e[t]=e[t]||[],e[t].push(r)}),this},s=function(t,e){if(!t||"string"!=typeof t)return console.error("type must be a string");if("function"!=typeof e)return console.error("listener must be a function");var r=t.split(" ");return r.forEach(function(t){if(t){var r=function(n){return i(t,r),e.call(this,n)};o(t,r)}}),this},i=function(t,r){if(!t||"string"!=typeof t)return console.error("type must be a string");if("function"!=typeof r)return console.error("listener must be a function");var n=t.split(" ");return n.forEach(function(t){var n=e[t];if(n)for(var o;~(o=n.indexOf(r));)n.splice(o,1)}),this},a=function(t){if("function"==typeof t){var r=!1;return e.forEach(function(e){r||e===t&&(r=!0)}),r}return!(!e[t]||!e[t].length)},u=function(o,s,i,a){if(!n){var u;o&&o.type||o;if("string"==typeof o)u=r.createEvent(o,s,t);else{if(!(o instanceof r))return console.error("illegal arguments, type is must be a string or event",o);u=o}u.currentTarget=t;var h=function(e){u.stoppedImmediate||e.call(t,u)};return i&&a===!1||((e["*"]||[]).slice().reverse().forEach(h),(e[u.type]||[]).slice().reverse().forEach(h)),i&&!u.stopped&&("up"===i?l.every(function(t){return t.fire&&t.fire(u,null,i),!u.stopped}):"down"===i?p.every(function(t){return t.fire&&t.fire(u,null,i),!u.stopped}):Array.isArray(i)?i.every(function(t){return t.fire&&t.fire(u),!u.stopped}):console.warn("invalid type of direction",i)),!u.defaultPrevented}},h=function(){return e=null,this},f=function(){return n=!0,this},c=function(){return n=!1,this},l=[],p=[],d=function(t,e){if(!t)return console.warn("illegal argument: target cannot be null",t);if("function"!=typeof t.fire)return console.warn("illegal argument: target must have fire method",t);if(!("up"===e&&~l.indexOf(t)||"down"===e&&~p.indexOf(t))){if("up"===e)l.push(t);else{if("down"!==e)return console.warn('illegal argument: direction must be "up" or "down" but ',e);p.push(t)}return this}},m=function(t,e){return t?(e&&"up"!==e||!~l.indexOf(t)||l.splice(l.indexOf(fn),1),e&&"down"!==e||!~p.indexOf(t)||p.splice(p.indexOf(fn),1),this):this};return{on:o,once:s,off:i,fire:u,has:a,destroy:h,pause:f,resume:c,connect:d,disconnect:m}}},function(t,e,r){function n(t){return a+=1,t.id+":"+a}function o(){return s.parse(location.href).path}var s=r(3),i=r(23),a=0;t.exports=function(t,e){if(!("object"==typeof history||history&&history.pushState))return console.error("[x-router] browser does not support 'history.pushState'");var r,s={},a={},u=function(e){if(e.state in s){var r=s[e.state],n=r.body;n===a&&(n=null),t.href(o(),n,{pop:!0})}},h=function(o){if(e&&e.fire("writestate",o.detail),!o.detail.pop)if(o.detail.replace){var i=r=n(t);s[i]=o.detail.body||a,history.replaceState(i,null,o.detail.href)}else{var i=r=n(t);s[i]=o.detail.body||a,history.pushState(i,null,o.detail.href)}};return window.addEventListener("popstate",u),t.on("writestate",h),i(function(){t.href(o())}),{disconnect:function(){document.removeEventListener("popstate",u),t.off("writestate",h)}}}},function(t,e){t.exports=function(t){document.body?window.setTimeout(t,1):document.addEventListener?document.addEventListener("DOMContentLoaded",function(){window.setTimeout(t,1)}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&window.setTimeout(t,1)})}},function(t,e,r){function n(t){return location.hash.substring(t)||"/"}var o=r(23);t.exports=function(t){t="#"+(t||"");var e=t.length;return function(r,s){var i,a=function(){var o=n(e);location.hash.startsWith(t+"/")&&i!==o&&r.href(o)};window.addEventListener?window.addEventListener("hashchange",a):window.attachEvent("hashchange",a);var u=function(e){if(s&&s.fire("writestate",e.detail),!e.detail.pop){var r=t+e.detail.href;r!==i&&(i=e.detail.href,e.detail.replace?location.replace(r):location.assign(r))}};return r.on("writestate",u),o(function(){location.hash.startsWith(t+"/")?r.href(n(e)):r.href("/")}),{disconnect:function(){window.addEventListener?window.removeEventListener("hashchange",a):window.detachEvent("hashchange",a),r.off("writestate",u)}}}}},function(t,e,r){t.exports=function(t,e){return"object"==typeof history&&history&&history.pushState?r(22)(t,e):r(24)("!")(t,e)}},function(t,e,r){function n(t,e){var r=t.target,n=t.src,o=t.html,i=function(t,n){return t?e(t):("object"==typeof n&&n.html&&(n=n.html),"string"!=typeof n?e(new Error("html must be a string")):(r.innerHTML=n,void e()))};n?s(n,i):o?i(null,o):e(new Error("missing src or html"))}var o=r(2),s=r(27);t.exports=function(){var t={};return t["default"]=n,this.engine=function(e,r){return 1===arguments.length?t[e]:(t[e]=r,this)},function(t,e,r){var n=t.app;e.render=function(r,s,i){2==arguments.length&&"function"==typeof s&&(i=s,s=null);var a,u=function(t,e){if(t)return i?i.call(this,t):console.error(t);var r=[].slice.call(arguments,1),n=[null,m];i&&i.apply(this,n.concat(r))},h={};if(!r)return u(new Error("missing src"));if("string"==typeof r){var f=o.extname(r).substring(1).toLowerCase(),c=e.config("view engine")||n.config("view engine")||"default",l=s&&s.engine||f||c,p=e.config("views")||n.config("views")||"/";if(a=n.engine(l)||n.engine(c),!a)return u(new Error("not exists engine: "+l));~r.indexOf("://")||0===r.indexOf("//")?h.src=r:("/"===r[0]&&(r="."+r),h.src=o.join(p,r))}else{if("object"!=typeof r)return u(new Error("illegal type of src: "+typeof r));var c=e.config("view engine")||n.config("view engine")||"default",l=s&&s.engine||function(){for(var t in r)if(n.engine(t))return t}();if(a=n.engine(l)||n.engine(c),!a)return u(new Error("not exists engine: "+l));h.html=r.html}if(s||(s={}),"string"==typeof s&&(s={target:s}),"object"!=typeof s)return u(new TypeError("options must be an object or string(target)"));for(var d in s)h[d]=s[d];var m=h.target||e.config("view target")||n.config("view target");if("string"==typeof m&&(m=document.querySelector(m)),!m)return u(new Error("view target not found: "+(h.target||e.config("view target")||n.config("view target"))));h.target=m,h.request=t,h.response=e,n.fire("beforerender",{href:t.href,options:h,src:r,target:m,url:t.url,request:t,response:e})&&(m.xrouter=n,m.xrouter_rendered_base=t.parentURL,n.id?m.setAttribute("data-xrouter-scope",n.id+""):m.setAttribute("data-xrouter-scope",""),m.setAttribute("data-xrouter-base",m.xrouter_rendered_base),setTimeout(function(){a.call(n,h,function(o){return o?u(o):(n.fire("render",{href:t.href,options:h,src:r,target:m,url:t.url,request:t,response:e}),u.apply(this,arguments),void(g&&e.end()))})},1));var g=!1;return{end:function(){g=!0}}},e.render.html=function(t,r,n){return"string"!=typeof t?n&&n(new Error("html must be a string")):(t={html:t},e.render.apply(this,arguments))},r()}}},function(t,e){t.exports=function(t,e,r){if(!t)throw new Error("missing src");2==arguments.length&&"function"!=typeof e&&(r=e,e=null),"boolean"==typeof r&&(r={sync:r});var n,o,s=(r&&r.sync)===!0,i=r&&r.method||"GET";scope=r&&r.scope||this;var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(a.open(i,t,!s),r){for(var u in r.headers)a.setRequestHeader(u,r.headers);r.mimetype&&a.overrideMimeType(r.mimetype)}if(a.onreadystatechange=function(t){4==this.readyState&&(0==this.status||this.status>=200&&this.status<300?(n=this.responseText,e&&e.call(scope,null,n,a)):(o=new Error("["+this.status+"] "+this.responseText),e&&e.call(scope,o,null,a)))},r&&r.payload?a.send(JSON.stringify(r.payload)):a.send(),o)throw o;return n}},function(t,e,r){var n=r(2);t.exports=function(){return function(t,e,r){e.redirect=function(r,o,s){return e.end(),s=s||{},s.redirect=!0,o=o||t.body,"#"!==r[0]&&"/"!==r[0]&&(r=n.resolve(n.join(t.parentURL,t.url),r)),t.app.fire("redirect",{options:s,body:o,href:r,request:t,response:e}),t.app.href(r,o,s),this},r()}}},function(t,e,r){function n(t){var e=t.indexOf(":"),r=t.indexOf("/");return~e&&e<r||0===t.indexOf("//")||0===t.toLowerCase().indexOf("javascript:")}function o(t){return t.__xrouter_scan__||(t.__xrouter_scan__=!0,t.onroute=null,t.onrouteresponse=null,t.onrouterequest=null,t.onclick=function(e){var r=t.getAttribute("data-route")||t.getAttribute("route")||t.getAttribute("data-routes")||t.getAttribute("routes"),o=t.getAttribute("data-href")||t.getAttribute("href"),s=t.getAttribute("data-ghost")||t.hasAttribute("ghost"),i=t.getAttribute("data-replace")||t.hasAttribute("replace"),a=t.getAttribute("data-root")||t.hasAttribute("root");if(o&&!n(o)){if((!c||c>8)&&e.preventDefault(),"$root"===r&&(a=!0),a)return f.href(o,{srcElement:t},{writestate:!s,replace:i}),!1;var u=h(t);return!u&&r?console.error("[x-router] not found scope: "+r):(u||f).href(o,{srcElement:t},{writestate:!s,replace:i}),!1}}),this}function s(){return[].forEach.call(document.querySelectorAll(l),o),this}function i(){s(),"false"!==a("observe")&&(window.MutationObserver?(p&&p.disconnect(),p=new MutationObserver(function(t){t.forEach(function(t){[].forEach.call(t.addedNodes,function(t){1===t.nodeType&&((t.hasAttribute("route")||t.hasAttribute("routes"))&&o(t),(t.hasAttribute("data-route")||t.hasAttribute("data-routes"))&&o(t),t.querySelectorAll&&[].forEach.call(t.querySelectorAll(l),o))})})}),p.observe(document.body,{childList:!0,subtree:!0})):window.setInterval(s,+a("observe.delay")||1e3))}var a=(r(3),r(19)),u=r(23),h=r(1),f=r(20),c=r(30),l=("true"===a("debug"),"*[route], *[data-route], *[routes], *[data-routes]");document.head||(document.head=document.getElementsByTagName("head")[0]);var p;t.exports={start:function(){return u(i),this},scan:s}},function(t,e){t.exports=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("msie")!=-1&&parseInt(t.split("msie")[1])}()}])});