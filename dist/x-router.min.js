/*! x-router - attrs */!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("xrouter",[],e):"object"==typeof exports?exports.xrouter=e():t.xrouter=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){!function(){String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.indexOf(t,this.length-t.length)!==-1}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),Array.prototype.forEach||(Array.prototype.forEach=function(t){for(var e=0;e<this.length;e++)t.apply(this,[this[e],e,this])}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var r=e||0;r<this.length;r++)if(this[r]==t)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t,e){var e=e?parseInt(e,10):this.length-1;for(e<0&&(e=this.length+e),e;e>-1;e--)if(this[e]===t)return e;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),document.head||(document.head=document.getElementsByTagName("head")[0])}();var n=t.exports=r(1);n.middleware.add(r(16)),n.middleware.add(r(18)),n.scanner=r(19).start(),n.href=function(){return n.pathbar.href.apply(n.pathbar,arguments)},n.get=function(t){return t?"string"==typeof t?n.get(t):(t=t[0]||t,t.parentNode?function(){for(;t;){if(t.xrouter)return t.xrouter;t=t.parentNode}}():void 0):null},"object"==typeof window&&(window.xrouter=n)},function(t,e,r){function n(t,e){if(!e)return"/";if("/"===e[0])return e;var e=a.parse(e).path;if("/"!==e[0]&&(e="/"+e),!t)return e;var r=s.dirname(t+"a");return"/"===r&&(r=""),r+e}function o(t){var e,r,o=i(t),s="true"===u("debug"),a={},p={},l=[];return s&&console.info("app created",t),t&&(c[t]=o),f.forEach(function(t){o.use(t.call(o))}),o.debug=function(t){return arguments.length?(s=!!t,this):s},o.config=function(t,e){return arguments.length<=1?a[t]:(null===e||void 0===e?delete a[t]:a[t]=e,this)},o.set=function(t,e){return o.config(t,e),this},o.session=function(){return p},o.state=function(t){return t=+t||0,l[l.length-1+t]},o.history=function(){return l},o.referer=function(){return e},o.app=function(t,e){var r={},n=!1,a={request:{requesthref:t.requesthref,method:t.method||"get",referer:t.referer,fullhref:t.href,href:t.href,url:t.url,session:p,options:t.options,body:t.body},response:{get:function(t){return r[t]},set:function(t,e){return a.response.config(t,e),this},config:function(t,e){return arguments.length?1===arguments.length?r[t]:(null===e||void 0===e?delete r[t]:r[t]=e,this):r},end:function(){return n?console.warn("[x-router] request '"+t.href+"' already finished."):(n=!0,void o.fire("end",{url:t.url,href:t.href,request:t,response:e}))}}};return s&&console.info("app build",o.id,a),a},o.href=function(t,e,a){if(!arguments.length)return r;if("boolean"==typeof e&&(a={writestate:e},e=null),"boolean"==typeof a&&(a={writestate:a}),a&&"object"==typeof a||(a={}),!t)return console.error("[x-router] missing url");if("number"==typeof t&&(url+=""),"string"!=typeof t)return console.error("[x-router] illegal type of url");var i=n(o.state(),t),e=e,u=a.force===!0,h=a.writestate!==!1,f=a.replace===!0;if(h||(u=!0),o.config("always")===!0&&(u=!0),s&&console.info("href",t,{currenthref:r,href:i,force:u,writestate:h,prevstate:o.state()}),u||r!==i){var c=o.app({requesthref:t,referer:r,href:i,url:i,options:a,body:e}),p=c.request,d=c.response;return o.fire("beforerequest",{href:i,request:p,response:d})?(h&&(l.push(i),l.length>30&&(l=l.slice(l.length-30)),o.fire("pushstate",{href:i,replace:f,request:p,response:d})),o(p,d),r=i,o.fire("request",{href:i,request:p,response:d})):s&&console.info("[x-router] beforerequest event prevented"),this}},o.refresh=function(t){if(t=t!==!1){var e=o.state();if(e)return o.href(e,null,{force:!0})}else if(r)return o.href(r,null,{force:!0})},o.on("replace",function(t){s&&console.info("[x-router] route replaced",t.detail);var e=t.detail.request;e.options.writestate!==!1&&(l[l.length-1]=t.detail.href,o.fire("replacestate",{href:t.detail.href,request:e,response:t.detail.response}))}),o.listen=function(t){return h.connect(o,t),this},o.close=function(){return h.disconnect(o),this},o}var s=r(2),a=r(4),i=r(11),u=r(14),h=r(15),f=[],c={};o.pathbar=h,o.Router=i,o.middleware={add:function(t){return f.push(t),this},remove:function(t){return~f.indexOf(t)&&f.splice(f.indexOf(t),1),this},list:function(){return f}},o.apps=c,o.ids=function(){return Object.keys(c)},o.get=function(t){return c[t]},t.exports=o},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return o.exec(t).slice(1)};e.resolve=function(){for(var e="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var a=s>=0?arguments[s]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,o="/"===a.charAt(0))}return e=r(n(e.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+e||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===a(t,-1);return t=r(n(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var o=n(t.split("/")),s=n(r.split("/")),a=Math.min(o.length,s.length),i=a,u=0;u<a;u++)if(o[u]!==s[u]){i=u;break}for(var h=[],u=i;u<o.length;u++)h.push("..");return h=h.concat(s.slice(i)),h.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=s(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=s(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return s(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(e,r(3))},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function s(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function a(){m&&l&&(m=!1,l.length?d=l.concat(d):g=-1,d.length&&i())}function i(){if(!m){var t=o(a);m=!0;for(var e=d.length;e;){for(l=d,d=[];++g<e;)l&&l[g].run();g=-1,e=d.length}l=null,m=!1,s(t)}}function u(t,e){this.fun=t,this.array=e}function h(){}var f,c,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var l,d=[],m=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||m||o(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=h,p.addListener=h,p.once=h,p.off=h,p.removeListener=h,p.removeAllListeners=h,p.emit=h,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&h.isObject(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function s(t){return h.isString(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function i(t,e){return t?o(t,!1,!0).resolveObject(e):e}var u=r(5),h=r(7);e.parse=o,e.resolve=a,e.resolveObject=i,e.format=s,e.Url=n;var f=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(l),m=["'"].concat(d),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=r(8);n.prototype.parse=function(t,e,r){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(o),a=/\\/g;s[0]=s[0].replace(a,"/"),t=s.join(o);var i=t;if(i=i.trim(),!r&&1===t.split("#").length){var c=p.exec(i);if(c)return this.path=i,this.href=i,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=O.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=f.exec(i);if(l){l=l[0];var d=l.toLowerCase();this.protocol=d,i=i.substr(l.length)}if(r||l||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var j="//"===i.substr(0,2);!j||l&&q[l]||(i=i.substr(2),this.slashes=!0)}if(!q[l]&&(j||l&&!_[l])){for(var S=-1,E=0;E<v.length;E++){var P=i.indexOf(v[E]);P!==-1&&(S===-1||P<S)&&(S=P)}var A,T;T=S===-1?i.lastIndexOf("@"):i.lastIndexOf("@",S),T!==-1&&(A=i.slice(0,T),i=i.slice(T+1),this.auth=decodeURIComponent(A)),S=-1;for(var E=0;E<g.length;E++){var P=i.indexOf(g[E]);P!==-1&&(S===-1||P<S)&&(S=P)}S===-1&&(S=i.length),this.host=i.slice(0,S),i=i.slice(S),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var L=this.hostname.split(/\./),E=0,I=L.length;E<I;E++){var R=L[E];if(R&&!R.match(b)){for(var U="",k=0,N=R.length;k<N;k++)U+=R.charCodeAt(k)>127?"x":R[k];if(!U.match(b)){var M=L.slice(0,E),W=L.slice(E+1),$=R.match(w);$&&(M.push($[1]),W.unshift($[2])),W.length&&(i="/"+W.join(".")+i),this.hostname=M.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=u.toASCII(this.hostname));var H=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+H,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!x[d])for(var E=0,I=m.length;E<I;E++){var z=m[E];if(i.indexOf(z)!==-1){var D=encodeURIComponent(z);D===z&&(D=escape(z)),i=i.split(z).join(D)}}var F=i.indexOf("#");F!==-1&&(this.hash=i.substr(F),i=i.slice(0,F));var X=i.indexOf("?");if(X!==-1?(this.search=i.substr(X),this.query=i.substr(X+1),e&&(this.query=O.parse(this.query)),i=i.slice(0,X)):e&&(this.search="",this.query={}),i&&(this.pathname=i),_[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",K=this.search||"";this.path=H+K}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(s=O.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,o=Object.keys(this),s=0;s<o.length;s++){var a=o[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),u=0;u<i.length;u++){var f=i[u];"protocol"!==f&&(r[f]=t[f])}return _[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!_[t.protocol]){for(var c=Object.keys(t),p=0;p<c.length;p++){var l=c[p];r[l]=t[l]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||q[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",g=r.search||"";r.path=m+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=y||v||r.host&&t.pathname,w=b,x=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],O=r.protocol&&!_[r.protocol];if(O&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===x[0])),y)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),r.search=t.search,r.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(O){r.hostname=r.host=x.shift();var j=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");j&&(r.auth=j.shift(),r.host=r.hostname=j.shift())}return r.search=t.search,r.query=t.query,h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=x.slice(-1)[0],E=(r.host||t.host||x.length>1)&&("."===S||".."===S)||""===S,P=0,A=x.length;A>=0;A--)S=x[A],"."===S?x.splice(A,1):".."===S?(x.splice(A,1),P++):P&&(x.splice(A,1),P--);if(!b&&!w)for(;P--;P)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),E&&"/"!==x.join("/").substr(-1)&&x.push("");var T=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(O){r.hostname=r.host=T?"":x.length?x.shift():"";var j=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");j&&(r.auth=j.shift(),r.host=r.hostname=j.shift())}return b=b||r.host&&x.length,b&&!T&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){var n;(function(t,o){!function(s){function a(t){throw RangeError(L[t])}function i(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function u(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(C,".");var o=t.split("."),s=i(o,e).join(".");return n+s}function h(t){for(var e,r,n=[],o=0,s=t.length;o<s;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<s?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function f(t){return i(t,function(t){var e="";return t>65535&&(t-=65536,e+=U(t>>>10&1023|55296),t=56320|1023&t),e+=U(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,r){var n=0;for(t=r?R(t/j):t>>1,t+=R(t/e);t>I*_>>1;n+=x)t=R(t/I);return R(n+(I+1)*t/(t+O))}function d(t){var e,r,n,o,s,i,u,h,p,d,m=[],g=t.length,v=0,y=E,b=S;for(r=t.lastIndexOf(P),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&a("not-basic"),m.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(s=v,i=1,u=x;o>=g&&a("invalid-input"),h=c(t.charCodeAt(o++)),(h>=x||h>R((w-v)/i))&&a("overflow"),v+=h*i,p=u<=b?q:u>=b+_?_:u-b,!(h<p);u+=x)d=x-p,i>R(w/d)&&a("overflow"),i*=d;e=m.length+1,b=l(v-s,e,0==s),R(v/e)>w-y&&a("overflow"),y+=R(v/e),v%=e,m.splice(v++,0,y)}return f(m)}function m(t){var e,r,n,o,s,i,u,f,c,d,m,g,v,y,b,O=[];for(t=h(t),g=t.length,e=E,r=0,s=S,i=0;i<g;++i)m=t[i],m<128&&O.push(U(m));for(n=o=O.length,o&&O.push(P);n<g;){for(u=w,i=0;i<g;++i)m=t[i],m>=e&&m<u&&(u=m);for(v=n+1,u-e>R((w-r)/v)&&a("overflow"),r+=(u-e)*v,e=u,i=0;i<g;++i)if(m=t[i],m<e&&++r>w&&a("overflow"),m==e){for(f=r,c=x;d=c<=s?q:c>=s+_?_:c-s,!(f<d);c+=x)b=f-d,y=x-d,O.push(U(p(d+b%y,0))),f=R(b/y);O.push(U(p(f,0))),s=l(r,v,n==o),r=0,++n}++r,++e}return O.join("")}function g(t){return u(t,function(t){return A.test(t)?d(t.slice(4).toLowerCase()):t})}function v(t){return u(t,function(t){return T.test(t)?"xn--"+m(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);y.global!==y&&y.window!==y&&y.self!==y||(s=y);var b,w=2147483647,x=36,q=1,_=26,O=38,j=700,S=72,E=128,P="-",A=/^xn--/,T=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=x-q,R=Math.floor,U=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:h,encode:f},decode:d,encode:m,toASCII:v,toUnicode:g},n=function(){return b}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(6)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(9),e.encode=e.stringify=r(10)},function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var i=1e3;o&&"number"==typeof o.maxKeys&&(i=o.maxKeys);var u=t.length;i>0&&u>i&&(u=i);for(var h=0;h<u;++h){var f,c,p,l,d=t[h].replace(a,"%20"),m=d.indexOf(n);m>=0?(f=d.substr(0,m),c=d.substr(m+1)):(f=d,c=""),p=decodeURIComponent(f),l=decodeURIComponent(c),r(s,p)?Array.isArray(s[p])?s[p].push(l):s[p]=[s[p],l]:s[p]=l}return s}},function(t,e){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,o){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var s=encodeURIComponent(r(o))+n;return Array.isArray(t[o])?t[o].map(function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[o]))}).join(e):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(t)):""}},function(t,e,r){function n(t,e){var r=f.fromString(t),n=f.fromString(t+"/*after");return{match:function(o){if("/"===t&&e)return!0;if(r.matches(o))return r.match(o).namedParams;if(e&&n.matches(o)){var s=n.match(o).namedParams;return delete s.after,s}return!1},matches:function(t){return!!pattern.matches(t)||!(!e||!n.matches(t))}}}function o(t,e){if("/"===t[0]&&(t=t.substring(1)),"/"===e[0]&&(e=e.substring(1)),t.endsWith("/")&&(t=t.substring(0,t.length-1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),!t)return{sub:"/"+e,parent:"/"};for(;~t.indexOf("//");)t.split("//").join("/");for(;~e.indexOf("//");)e.split("//").join("/");t=t.split("/"),e=e.split("/");for(var r=[],n=[],o=0;o<e.length;o++){if(t[o]&&":"!==t[o][0]&&e[o]!==t[o])return null;o>=t.length?r.push(e[o]):n.push(e[o])}return{parent:"/"+n.join("/"),sub:"/"+r.join("/")}}function s(){var t={};return[].forEach.call(arguments,function(e){if(e&&"object"==typeof e)for(var r in e)t[r]=e[r]}),t}function a(t){t=t||Math.random()+""||"unknwon";var e=!0,r=[],a={},f=function(n,a,c){var p=n=n||{};a=a||{};if("function"==typeof f.app){var l=f.app(n,a);n=l.request,a=l.response,n.parentApp=p.app,n.app=f,n.href=p.url,n.url=p.url,n.parsed=u.parse(n.href),n.hash=n.parsed.hash,n.query=h.parse(n.parsed.query),n.parentURL="",n.params={}}var d=n.parentURL=n.parentURL||"",m=n.url=n.url||"/",g=n.params=n.params||{},v=!1,y=function(r){return v?console.error("next function twice called.",t,r):(v=!0,e=!1,n.parentURL=d,n.url=m,n.params=g,r?(f.fire("error",{router:f,href:n.href,url:n.url,request:n,response:a,error:r}),c&&c(r)):(f.fire("notfound",{router:f,href:n.href,url:n.url,request:n,response:a}),void(c&&c())))},b=0,w=function(t){if(t)return y(t);var h=r[b++];if(!h)return y();if(!e&&"boot"===h.type)return w();var c=h.fn,p=(h.type,h.path),l=h.pattern&&h.pattern.match(n.url);if(!l)return w();if(n.params=s(g,l),n.parentURL=d,n.url=m,n.boot=e,"string"==typeof c){if("/"==c[0]||"."==c[0])return console.error("[tinyrouter] illegal replace url",c);var v=n.href;return n.url=m="/"+c,n.href=i.join(d,c),f.fire("replace",{previous:v,href:n.href,request:n,response:a}),w()}if(c.__router__){var x=o(p,u.parse(n.url).pathname);n.parentURL=i.join(d,x.parent),n.url=n.url.substring(x.parent.length)}f.fire("route",{route:h,href:n.href,url:n.url,request:n,response:a}),h.fn.apply(f,[n,a,w])};w()};f.id=t,f.__router__=p;var l=function(t){if(t&&t===f)throw new Error("cannot add router itself: "+t.id);return t.__router__===p&&(t.parent=f),t};return f.exists=function(t){var e=!1;return r.forEach(function(r){if(!e)if("get"===r.type){var n=r.pattern.match(t);n&&(e=!0)}else"use"===r.type&&(e=r.fn.exists(t.substring(r.path.length)))}),e},f.use=function(t,e){if("function"==typeof t&&(e=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of path:"+typeof t);return r.push({type:"use",path:t||"/",pattern:n(t,!0),fn:l(e)}),this},f.get=function(t,e){if("function"==typeof t&&(e=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of path:"+typeof t);return r.push({type:"get",path:t||"/",pattern:n(t),fn:e}),this},f.boot=function(t,e){if("function"==typeof t&&(e=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of path:"+typeof t);return r.push({type:"boot",path:t||"/",pattern:n(t,!0),fn:l(e)}),this},f.notfound=function(t){return f.on("notfound",t),this},f.error=function(t){return f.on("error",t),this},f.drop=function(t){var e=[];return r.forEach(function(r){r.fn===t&&e.push(r)}),e.forEach(function(t){r.splice(r.indexOf(t),1)}),this},f.clear=function(){return r=[],this},f.on=function(t,e){return a[t]=a[t]||[],a[t].push(e),this},f.once=function(t,e){var r=function(n){return f.off(t,r),e.call(this,n)};return f.on(t,r),this},f.off=function(t,e){var r=a[t];if(r)for(var n;~(n=r.indexOf(e));)r.splice(n,1);return this},f.fire=function(t,e){var r=t&&t.type||t;if(!(a[r]||a["*"]||~["route","replace"].indexOf(r)&&f.parent))return!0;var n;if("string"==typeof t)n=c.createEvent(t,e,f);else{if(!(t instanceof c))return console.error("illegal arguments, type is must be a string or event",t);n=t}n.currentTarget=f;var o=!1,s=!1,i=function(t,e){o||(t.call(e,n),n.defaultPrevented===!0&&(s=!0),n.stoppedImmediate===!0&&(o=!0))};return(a["*"]||[]).forEach(i,f),(a[n.type]||[]).forEach(i,f),~["route","replace"].indexOf(n.type)&&f.parent&&f.parent!==f&&f.parent.fire(n),!s},f.hasListener=function(t){if("function"==typeof t){var e=!1;return a.forEach(function(r){e||r===t&&(e=!0)}),e}return!(!a[t]||!a[t].length)},f}var i=r(2),u=r(4),h=r(8),f=r(12),c=r(13),p={};t.exports=a},function(t,e,r){function n(){return[].slice.call(arguments).reduce(function(t,e){for(var r in e)t[r]=e[r];return t},{})}function o(t){var e=/([^\?#]*)?(\?[^#]*)?(#.*)?$/,r=e.exec(t);return{path:r[1]||"",queryString:r[2]&&r[2].substring(1)||"",hash:r[3]&&r[3].substring(1)||""}}var s=r(8),a=function(){function t(t){this.params=t.params,this.allowWildcards=t.allowWildcards,this.routeString=t.routeString}return t.prototype.matches=function(t){for(var e,r=(t||"").split("&").reduce(function(t,e){var r=e.split("="),n=r[0],o=r[1];return n&&(t[n]=o),t},{}),n=[].concat(this.params);e=n.shift();){if(!r.hasOwnProperty(e.key))return!1;if(e.value&&r[e.key]!=e.value)return!1}return!(!this.allowWildcards&&this.params.length&&Object.getOwnPropertyNames(r).length>this.params.length)},t.prototype.match=function(t){if(!this.matches(t))return null;var e={params:[],namedParams:{},namedQueryParams:{}};if(!t)return e;var r=this.params.reduce(function(t,e){return t[e.key]=e.name,t},{}),n=s.parse(t);return Object.keys(n).forEach(function(t){var o=n[t];e.params.push(o),r[t]&&(e.namedQueryParams[r[t]]=e.namedParams[r[t]]=o)}),e},t.fromString=function(e){var r={routeString:e,allowWildcards:!1,params:[]};return e.split("&").forEach(function(t){if(t){var e=t.split("="),n=e[0],o=e[1]||"",s=!1,a={key:n};":"==o.charAt(0)?a.name=o.substring(1):"*"==n&&""==o?s=r.allowWildcards=!0:a.value=o,s||r.params.push(a)}}),new t(r)},t}(),i=function(){function t(t){this.regexp=t.regexp,this.params=t.params,this.routeString=t.routeString}var e=/:\w+/g,r=/\*\w+/g,n=/(:[^\/\.]+)|(\*\w+)/g,o=/\*/g,s=/[-[\]{}()+?.,\\^$|#\s]/g;return t.prototype.matches=function(t){return this.regexp.test(t)},t.prototype.match=function(t){if(!this.matches(t))return null;var e={params:[],namedParams:{}};return(this.regexp.exec(t)||[]).slice(1).forEach(function(t,r){void 0!==t&&(t=decodeURIComponent(t)),e.namedParams[this.params[r]]=t,e.params.push(t)},this),e},t.routePathToRegexp=function(t){return t=t.replace(s,"\\$&").replace(e,"([^/]+)").replace(r,"(.*)?").replace(o,".*?").replace(/\/?$/,"/?"),new RegExp("^/?"+t+"$")},t.fromString=function(e){e=e.split(/\?|#/)[0];var r={routeString:e,regexp:t.routePathToRegexp(e),params:(e.match(n)||[]).map(function(t){return t.substring(1)})};return new t(r)},t}(),u=function(){function t(t){this.regex=t}return t.prototype.matches=function(t){return this.regex.test(t)},t.prototype.match=function(t){if(!this.matches(t))return null;var e=o(t);return{params:this.regex.exec(t).slice(1),queryParams:s.parse(e.queryString),namedParams:{}}},t}(),h=function(){function t(t){this.pathPattern=t.pathPattern,this.queryStringPattern=t.queryStringPattern,this.hashPattern=t.hashPattern,this.routeString=t.routeString}return t.prototype.matches=function(t){var e=o(t);return(!this.pathPattern||this.pathPattern.matches(e.path))&&(!this.queryStringPattern||this.queryStringPattern.matches(e.queryString))&&(!this.hashPattern||this.hashPattern.matches(e.hash))},t.prototype.match=function(t){if(!this.matches(t))return null;var e,r,a=o(t),i={params:[],namedParams:{},pathParams:{},queryParams:s.parse(a.queryString),namedQueryParams:{},hashParams:{}},u=function(t){i.params=i.params.concat(t.params),i.namedParams=n(i.namedParams,t.namedParams)};return(r=this.pathPattern)&&(e=r.match(a.path),e&&u(e),i.pathParams=e?e.namedParams:{}),(r=this.queryStringPattern)&&(e=r.match(a.queryString),e&&u(e),i.namedQueryParams=e?e.namedQueryParams:{}),(r=this.hashPattern)&&(e=r.match(a.hash),e&&u(e),i.hashParams=e?e.namedParams:{}),i},t.fromString=function(e){var r=o(e),n=r.path,s=r.queryString||e.indexOf("?")>-1,u=r.hash||e.indexOf("#")>-1;return new t({pathPattern:n&&i.fromString(r.path),queryStringPattern:s&&a.fromString(r.queryString),hashPattern:u&&i.fromString(r.hash),routeString:e})},t}();t.exports=h,h.QueryStringPattern=a,h.PathPattern=i,h.RegExpPattern=u},function(t,e){function r(t,e,r,n){this.type=t,this.detail=e||{},this.target=this.currentTarget=r,this.cancelable=n===!0,this.defaultPrevented=!1,this.stopped=!1,this.timeStamp=(new Date).getTime()}r.prototype={preventDefault:function(){this.cancelable&&(this.defaultPrevented=!0)},stopPropagation:function(){this.stopped=!0},stopImmediatePropagation:function(){this.stoppedImmediate=!0}},r.createEvent=function(t,e,n,o){return new r(t,e,n,o)},t.exports=r},function(t,e){t.exports=function(t,e){var r=document.head.querySelector('meta[name="xrouter.'+t+'"]');return r&&r.getAttribute("content")||e}},function(t,e,r){var n=r(4),o=r(14),s="true"===o("debug"),a=o("mode")||(history.pushState?"pushstate":"hashbang"),i=[],u=0,h=function(){return n.parse(location.href).path};t.exports={href:function(t,e,r){var n=arguments;return i.forEach(function(t){t.href.apply(t,n)}),this},connect:function(t,e){if(!t)return console.error("missing argument:app");if(~i.indexOf(t))return console.error("already listening",t.id);e=e||{},i.push(t);var r=e.mode||a;if(~["pushstate","hash","hashbang","auto"].indexOf(r)||(console.warn("[x-router] unsupported mode: "+r),r="auto"),"auto"===r&&(r=history.pushState?"pushstate":"hashbang"),"pushstate"!==r||history.pushState||(console.warn("[x-router] browser does not support `history.pushState`"),r="hashbang"),s&&console.info("xrouter.mode",o("mode"),r),"pushstate"===r){if(!history.pushState)return console.error("[x-router] browser does not support 'history.pushState'");var n,f={};t.__pathbar_popstate__=function(e){if(e.state in f){var r=f[e.state],n=r.body,o=r.options||{};o.writestate=!1,t.href(h(),n,o)}},t.__pathbar_pushstate__=function(t){var e=n=u++;f[e]={body:t.detail.body,options:t.detail.options},history.pushState(e,null,t.detail.href)},t.__pathbar_replacestate__=function(t){delete f[n];var e=n=u++;f[e]={body:t.detail.body,options:t.detail.options},history.replaceState(e,null,t.detail.href)},window.addEventListener("popstate",t.__pathbar_popstate__),t.on("pushstate",t.__pathbar_pushstate__),t.on("replacestate",t.__pathbar_replacestate__)}var c=function(){"pushstate"===r?t.href(h()):"hashbang"===r?t.href(location.hash.substring(2)):"hash"===r&&t.href(location.hash.substring(1))};return document.body?c():document.addEventListener?document.addEventListener("DOMContentLoaded",function(){window.setTimeout(c,1)}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&window.setTimeout(c,1)}),this},disconnect:function(t){return~i.indexOf(t)&&i.splice(i.indexOf(t),1),document.removeEventListener("popstate",t.__pathbar_popstate__),t.off("pushstate",t.__pathbar_pushstate__),t.off("replacestate",t.__pathbar_replacestate__),this}}},function(t,e,r){function n(t,e){var r=t.target,n=t.src,o=t.html,a=function(t,n){return t?e(t):("object"==typeof n&&n.html&&(n=n.html),"string"!=typeof n?e(new Error("html must be a string")):(r.innerHTML=n,void e()))};n?s(n,a):o?a(null,o):e(new Error("missing src or html"))}var o=r(2),s=r(17);t.exports=function(){var t={"default":n};return this.engine=function(e,r){return 1===arguments.length?t[e]:(t[e]=r,this)},function(t,e,r){var n=t.app;e.render=function(r,s,a){2==arguments.length&&"function"==typeof s&&(a=s,s=null);var i,u=function(t,e){if(t)return a?a.call(this,t):console.error(t);var r=[].slice.call(arguments,1),n=[null,m];a&&a.apply(this,n.concat(r))},h={};if(!r)return u(new Error("missing src"));if("string"==typeof r){var f=o.extname(r).substring(1).toLowerCase(),c=e.config("view engine")||n.config("view engine")||"default",p=s&&s.engine||f||c,l=e.config("views")||n.config("views")||"/";if(i=n.engine(p)||n.engine(c),
!i)return u(new Error("not exists engine: "+p));~r.indexOf("://")||0===r.indexOf("//")?h.src=r:("/"===r.trim()[0]&&(r="."+r),h.src=o.join(l,r))}else{if("object"!=typeof r)return u(new Error("illegal type of src: "+typeof r));var c=e.config("view engine")||n.config("view engine")||"default",p=s&&s.engine||function(){for(var t in r)if(n.engine(t))return t}();if(i=n.engine(p)||n.engine(c),!i)return u(new Error("not exists engine: "+p));h.html=r[p||"html"]}if(s||(s={}),"string"==typeof s&&(s={target:s}),"object"!=typeof s)return u(new TypeError("options must be an object or string(target)"));for(var d in s)h[d]=s[d];var m=h.target||e.config("view target")||n.config("view target");return"string"==typeof m&&(m=document.querySelector(m)),m?(h.target=m,n.fire("beforerender",{href:t.href,options:h,src:r,target:m,url:t.url,request:t,response:e})&&i.call(n,h,function(o){return o?u(o):(n.fire("render",{href:t.href,options:h,src:r,target:m,url:t.url,request:t,response:e}),m.xrouter=n,void u.apply(this,arguments))}),this):u(new Error("view target not found: "+(h.target||e.config("view target")||n.config("view target"))))},e.render.html=function(t,r,n){return"string"!=typeof t?n&&n(new Error("html must be a string")):(t={html:t},e.render.apply(this,arguments),this)},r()}}},function(t,e){t.exports=function(t,e,r){if(!t)throw new Error("missing src");2==arguments.length&&"function"!=typeof e&&(r=e,e=null),"boolean"==typeof r&&(r={sync:r});var n,o,s=(r&&r.sync)===!0,a=r&&r.method||"GET";scope=r&&r.scope||this;var i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(i.open(a,t,!s),r){for(var u in r.headers)i.setRequestHeader(u,r.headers);r.mimetype&&i.overrideMimeType(r.mimetype)}if(i.onreadystatechange=function(t){4==this.readyState&&(0==this.status||this.status>=200&&this.status<300?(n=this.responseText,e&&e.call(scope,null,n,i)):(o=new Error("["+this.status+"] "+this.responseText),e&&e.call(scope,o,null,i)))},r&&r.payload?i.send(JSON.stringify(r.payload)):i.send(),o)throw o;return n}},function(t,e,r){var n=r(2);t.exports=function(){return function(t,e,r){e.redirect=function(r,o,s){return e.end(),s=s||{},s.redirect=!0,o=o||t.body,"#"!==r[0]&&"/"!==r[0]&&(r=n.resolve(n.join(t.parentURL,t.url),r)),t.app.fire("redirect",{options:s,body:o,href:r,request:t,response:e}),t.app.href(r,o,s),this},r()}}},function(t,e,r){function n(t){var e=t.indexOf(":"),r=t.indexOf("/");return~e&&e<r||0===t.indexOf("//")||0===t.toLowerCase().indexOf("javascript:")}function o(t){return t.__xrouter_scan__||(t.__xrouter_scan__=!0,t.onroute=null,t.onrouteresponse=null,t.onrouterequest=null,t.onclick=function(e){var r=t.getAttribute("data-route")||t.getAttribute("route"),o=t.hasAttribute("data-ghost")||t.hasAttribute("ghost"),s=t.getAttribute("data-href")||t.getAttribute("href")||"";if(!n(s)){(!c||c>8)&&e.preventDefault();var a=r?h.get(r):function(){for(var e=t;e;){if(e.xrouter)return e.xrouter;e=e.parentNode}}();return!a&&r?console.error("[x-router] not exists router: "+r):s&&(a||f).href(s,{srcElement:t},{writestate:!o}),!1}}),this}function s(){return[].forEach.call(document.querySelectorAll(p),o),this}function a(){s(),"false"!==u("observe")&&(window.MutationObserver?(i&&i.disconnect(),i=new MutationObserver(function(t){t.forEach(function(t){[].forEach.call(t.addedNodes,function(t){1===t.nodeType&&((t.hasAttribute("route")||t.hasAttribute("routes"))&&o(t),(t.hasAttribute("data-route")||t.hasAttribute("data-routes"))&&o(t),t.querySelectorAll&&[].forEach.call(t.querySelectorAll(p),o))})})}),i.observe(document.body,{childList:!0,subtree:!0})):window.setInterval(s,+u("observe.delay")||1e3))}var i,u=r(14),h=r(1),f=r(15),c=r(20),p=("true"===u("debug"),"*[route], *[data-route], *[routes], *[data-routes]");t.exports={start:function(){return document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function(){window.setTimeout(a,1)}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&window.setTimeout(a,1)}),this},scan:s}},function(t,e){t.exports=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("msie")!=-1&&parseInt(t.split("msie")[1])}()}])});