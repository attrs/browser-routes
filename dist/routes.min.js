/*! browser-routes v0.0.5 attrs */!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("Routes",[],r):"object"==typeof exports?exports.Routes=r():t.Routes=r()}(this,function(){return function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){function n(t,r){if(!t||"string"!=typeof t)throw new TypeError("illegal url");var e=(r||document).createElement("a");return e.href=t,{href:e.href,protocol:e.protocol,hostname:e.hostname,port:e.port,pathname:e.pathname,fullpath:e.pathname+(e.search?e.search:"")+(e.hash?e.hash:""),search:e.search,hash:e.hash,host:e.host}}function o(t,r){var e=document.head.querySelector('meta[name="'+t+'"][content]');return e&&e.getAttribute("content")||r}function i(t){t=t.trim(),"?"===t[0]&&(t=t.substring(1));for(var r,e=/\+/g,n=/([^&=]+)=?([^&]*)/g,o=function(t){return decodeURIComponent(t.replace(e," "))},i={};r=n.exec(t);){var a=o(r[1]),u=o(r[2]);Array.isArray(i[a])?i[a].push(u):i[a]?(i[a]=[i[a]]).push(u):i[a]=u}return i}function a(t,r,e,n){t.attachEvent?t.attachEvent(r,e):t.addEventListener(r,e,n)}function u(t,r){var e=l.fromString(t),n=l.fromString(t+"/*after");return{match:function(o){if("/"===t)return r?!0:t===o;if(e.matches(o))return e.match(o).namedParams;if(r&&n.matches(o)){var i=n.match(o).namedParams;return delete i.after,i}return!1},matches:function(t){return pattern.matches(t)?!0:!(!r||!n.matches(t))}}}function s(t,r,e,n,o){var i,a=0;return i=function(u){var s=n[a++];if(u||!s)return o(u);var c=s.uri,h=(s.type,s.fn),f=s.params;c&&"/"===c.trim()&&(c="");var l=r.parentUrl||"/",m=r.url;r.parentUrl=p.join(l,m.substring(0,c.length)),r.url=m.substring(c.length)||"/",r.params=f,h.apply(t,[r,e,i]),r.parentUrl=l,r.url=m,r.params={}}}function c(t){return function(r,e,n){e.redirect(t)}}function h(t){t=t||"unknwon";var r=!0,e=[],n={},o=function(t,n,i){if(!t.url||"/"!==t.url[0])throw new Error("illegal url: "+t.url);i=i||function(){};var a=[],u=!1;e.forEach(function(e){if("boot"===e.type)return void(r&&a.push(e));if(!u){var n;return(n=e.pattern.match(t.url))?("get"===e.type&&(u=!0),a.push({type:e.type,fn:e.fn,uri:e.uri,pattern:e.pattern,params:n})):void 0}}),t.boot=r,s(o,t,n,a,i)(t.error),r=!1};return o.exists=function(t){var r=!1;return e.forEach(function(e){if("get"===e.type&&match(t,e.uri))return r=!0;if("use"===e.type&&e.uri&&!t.indexOf(e.uri)){if("function"!=typeof e.fn.exists)return r=match(t,e.uri);r=e.fn.exists(t.substring(e.uri.length))}}),r},o.use=function(t,r){if("function"==typeof t&&(r=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of uri:"+typeof t);if("string"==typeof r&&(r=c(r)),"function"!=typeof r)throw new TypeError("illegal type of router:"+typeof r);return t=t?t.trim():"/","/"!==t[0]&&(t="/"+t),e.push({type:"use",uri:t,pattern:u(t,!0),fn:r}),this},o.get=function(t,r){if("function"==typeof t&&(r=t,t="/"),"string"!=typeof t)throw new TypeError("illegal type of uri:"+typeof t);if("string"==typeof r&&(r=c(r)),"function"!=typeof r)throw new TypeError("illegal type of router:"+typeof r);return t=t?t.trim():"/","/"!==t[0]&&(t="/"+t),e.push({type:"get",uri:t,pattern:u(t),fn:r}),this},o.boot=function(t){if("function"!=typeof t)throw new TypeError("illegal type of router:"+typeof t);return e.push({type:"boot",fn:t}),this},o.notfound=function(t){return o.on("notfound",t),this},o.error=function(t){return o.on("error",t),this},o.drop=function(t){var r=[];return e.forEach(function(e){e.fn===t&&r.push(e)}),r.forEach(function(t){e.splice(e.indexOf(t),1)}),this},o.clear=function(){return e=[],this},o.on=function(t,r){return n[t]=n[t]||[],n[t].push(r),this},o.once=function(t,r){var e=function(n){return o.off(t,e),r.call(this,n)};return o.on(t,e),this},o.off=function(t,r){var e=n[t];if(e)for(var o;~(o=e.indexOf(r));)e.splice(o,1);return this},o.fire=function(t,r){return"error"!==t||n[t]&&isteners[t].length?void(n[t]||[]).forEach(function(e){e.call(this,{type:t,detail:r||{}})}):console.error("[routes] error",r)},o}function f(t){if(!(this instanceof f))throw new Error("illegal state: 'new Routes()' instead of 'Routes()'");t=t||{};var r,e,o,a="",u=h("root");this.config=function(r,e){var n=t;return 1===arguments.length?n(r):(null===e?delete n[r]:n[r]=e,this)},this.base=function(t){return arguments.length?t?(a=p.dirname(p.resolve(t,"index.html")),this):(a="",this):a},this.router=function(t){return h(t)},this.normalize=function(t){return t=t.trim(),t?"/"===t[0]?a+t:n(t).fullpath:a};var s=this.exec=function(t){var c=n(t),h=c.hash,f=c.search,l=c.pathname,m=c.fullpath;if(!r||!r.requestURL||m!==r.requestURL){if(a&&l.startsWith(a))l=l.substring(a.length);else if(a)return console.error("given url is not a sub url of base url '"+a+"'");return o=[],r={method:"get",parsed:c,baseURL:a,requestURL:m,url:l,hashname:h,query:i(f),params:{}},e={redirect:function(t){return t.startsWith("#")?location.href=t:s(t.startsWith("/")?p.join(a,t):p.join(a,r.parentUrl,r.url,t)),u.fire("redirect",{requestURL:m,url:l,request:r,response:e}),this},hash:function(t,r){o.push({hash:t,fn:r})}},u.fire("request",{requestURL:m,url:l,request:r,response:e}),u(r,e),this}};this.exechash=function(){return this},this.use=function(t,r){return u.use.apply(u,arguments),this},this.boot=function(t){return u.boot(t),this},this.get=function(t,r){return u.get(t,r),this},this.notfound=function(t){return u.notfound(t),this},this.error=function(t){return u.error(t),this},this.drop=function(t){return u.drop(t),this},this.exists=function(t){return u.exists(t)},this.clear=function(){return u.clear(),this},this.on=function(t,r){return u.on(t,r),this},this.once=function(t,r){return u.once(t,r),this},this.off=function(t,r){return u.off(t,r),this}}var p=e(1),l=e(3),m=new f;m.Routes=f,m.Router=h,function(){function t(){function t(t){return t.__routes_managed__||(t.__routes_managed__=!0,a(t,"click",function(r){r.preventDefault(),m.href(t.getAttribute("href"))})),this}function r(){return[].forEach.call(document.querySelectorAll("[routes], [data-routes]"),t),this}i&&i.disconnect(),i=new MutationObserver(function(r){r.forEach(function(r){[].forEach.call(r.addedNodes,function(r){1===r.nodeType&&(r.hasAttribute("routes")&&t(r),r.hasAttribute("data-routes")&&t(r),r.querySelectorAll&&[].forEach.call(r.querySelectorAll("[routes], [data-routes]"),t))})})}),i.observe(document.body,{childList:!0,subtree:!0}),r(),m.exec(location.href)}var r=o("routes.mode")||(history.pushState?"pushstate":"hash");if("pushstate"===r){if(!history.pushState)return console.error("[routes] unsupported 'history.pushState'");var e=history.pushState;history.pushState=function(t,r,n){e.apply(history,arguments),m.exec(location.href)},window.onpopstate=function(t){m.exec(location.href)},m.on("request",function(t){n(location.href).fullpath!==n(t.detail.requestURL).fullpath&&e.call(history,null,null,t.detail.requestURL)}),m.href=function(t){history.pushState(null,null,m.normalize(t))}}else if("hash"===r){if(!("onhashchange"in window))return console.error("[routes] unsupported 'onhashchange'");a(window,"hashchange",function(){m.exec(location.hash)}),m.on("redirect",function(t){location.href="#"+t.detail.url}),m.href=function(t){location.href="#"+m.normalize(t)}}var i;document.body?t():a(document,"DOMContentLoaded",t)}(),t.exports=m},function(t,r,e){(function(t){function e(t,r){for(var e=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),e++):e&&(t.splice(n,1),e--)}if(r)for(;e--;e)t.unshift("..");return t}function n(t,r){if(t.filter)return t.filter(r);for(var e=[],n=0;n<t.length;n++)r(t[n],n,t)&&e.push(t[n]);return e}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return o.exec(t).slice(1)};r.resolve=function(){for(var r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,o="/"===a.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+r||"."},r.normalize=function(t){var o=r.isAbsolute(t),i="/"===a(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&i&&(t+="/"),(o?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,r){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var r=0;r<t.length&&""===t[r];r++);for(var e=t.length-1;e>=0&&""===t[e];e--);return r>e?[]:t.slice(r,e-r+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var o=n(t.split("/")),i=n(e.split("/")),a=Math.min(o.length,i.length),u=a,s=0;a>s;s++)if(o[s]!==i[s]){u=s;break}for(var c=[],s=u;s<o.length;s++)c.push("..");return c=c.concat(i.slice(u)),c.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var r=i(t),e=r[0],n=r[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},r.basename=function(t,r){var e=i(t)[2];return r&&e.substr(-1*r.length)===r&&(e=e.substr(0,e.length-r.length)),e},r.extname=function(t){return i(t)[3]};var a="b"==="ab".substr(-1)?function(t,r,e){return t.substr(r,e)}:function(t,r,e){return 0>r&&(r=t.length+r),t.substr(r,e)}}).call(r,e(2))},function(t,r){function e(){f&&c&&(f=!1,c.length?h=c.concat(h):p=-1,h.length&&n())}function n(){if(!f){var t=a(e);f=!0;for(var r=h.length;r;){for(c=h,h=[];++p<r;)c&&c[p].run();p=-1,r=h.length}c=null,f=!1,u(t)}}function o(t,r){this.fun=t,this.array=r}function i(){}var a,u,s=t.exports={};!function(){try{a=setTimeout}catch(t){a=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(t){u=function(){throw new Error("clearTimeout is not defined")}}}();var c,h=[],f=!1,p=-1;s.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)r[e-1]=arguments[e];h.push(new o(t,r)),1!==h.length||f||a(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,r,e){function n(){return[].slice.call(arguments).reduce(function(t,r){for(var e in r)t[e]=r[e];return t},{})}function o(t){var r=/([^\?#]*)?(\?[^#]*)?(#.*)?$/,e=r.exec(t);return{path:e[1]||"",queryString:e[2]&&e[2].substring(1)||"",hash:e[3]&&e[3].substring(1)||""}}var i=e(4),a=function(){function t(t){this.params=t.params,this.allowWildcards=t.allowWildcards,this.routeString=t.routeString}return t.prototype.matches=function(t){for(var r,e=(t||"").split("&").reduce(function(t,r){var e=r.split("="),n=e[0],o=e[1];return n&&(t[n]=o),t},{}),n=[].concat(this.params);r=n.shift();){if(!e.hasOwnProperty(r.key))return!1;if(r.value&&e[r.key]!=r.value)return!1}return!(!this.allowWildcards&&this.params.length&&Object.getOwnPropertyNames(e).length>this.params.length)},t.prototype.match=function(t){if(!this.matches(t))return null;var r={params:[],namedParams:{},namedQueryParams:{}};if(!t)return r;var e=this.params.reduce(function(t,r){return t[r.key]=r.name,t},{}),n=i.parse(t);return Object.keys(n).forEach(function(t){var o=n[t];r.params.push(o),e[t]&&(r.namedQueryParams[e[t]]=r.namedParams[e[t]]=o)}),r},t.fromString=function(r){var e={routeString:r,allowWildcards:!1,params:[]};return r.split("&").forEach(function(t){if(t){var r=t.split("="),n=r[0],o=r[1]||"",i=!1,a={key:n};":"==o.charAt(0)?a.name=o.substring(1):"*"==n&&""==o?i=e.allowWildcards=!0:a.value=o,i||e.params.push(a)}}),new t(e)},t}(),u=function(){function t(t){this.regexp=t.regexp,this.params=t.params,this.routeString=t.routeString}var r=/:\w+/g,e=/\*\w+/g,n=/(:[^\/\.]+)|(\*\w+)/g,o=/\*/g,i=/[-[\]{}()+?.,\\^$|#\s]/g;return t.prototype.matches=function(t){return this.regexp.test(t)},t.prototype.match=function(t){if(!this.matches(t))return null;var r={params:[],namedParams:{}};return(this.regexp.exec(t)||[]).slice(1).forEach(function(t,e){void 0!==t&&(t=decodeURIComponent(t)),r.namedParams[this.params[e]]=t,r.params.push(t)},this),r},t.routePathToRegexp=function(t){return t=t.replace(i,"\\$&").replace(r,"([^/]+)").replace(e,"(.*)?").replace(o,".*?").replace(/\/?$/,"/?"),new RegExp("^/?"+t+"$")},t.fromString=function(r){r=r.split(/\?|#/)[0];var e={routeString:r,regexp:t.routePathToRegexp(r),params:(r.match(n)||[]).map(function(t){return t.substring(1)})};return new t(e)},t}(),s=function(){function t(t){this.regex=t}return t.prototype.matches=function(t){return this.regex.test(t)},t.prototype.match=function(t){if(!this.matches(t))return null;var r=o(t);return{params:this.regex.exec(t).slice(1),queryParams:i.parse(r.queryString),namedParams:{}}},t}(),c=function(){function t(t){this.pathPattern=t.pathPattern,this.queryStringPattern=t.queryStringPattern,this.hashPattern=t.hashPattern,this.routeString=t.routeString}return t.prototype.matches=function(t){var r=o(t);return(!this.pathPattern||this.pathPattern.matches(r.path))&&(!this.queryStringPattern||this.queryStringPattern.matches(r.queryString))&&(!this.hashPattern||this.hashPattern.matches(r.hash))},t.prototype.match=function(t){if(!this.matches(t))return null;var r,e,a=o(t),u={params:[],namedParams:{},pathParams:{},queryParams:i.parse(a.queryString),namedQueryParams:{},hashParams:{}},s=function(t){u.params=u.params.concat(t.params),u.namedParams=n(u.namedParams,t.namedParams)};return(e=this.pathPattern)&&(r=e.match(a.path),r&&s(r),u.pathParams=r?r.namedParams:{}),(e=this.queryStringPattern)&&(r=e.match(a.queryString),r&&s(r),u.namedQueryParams=r?r.namedQueryParams:{}),(e=this.hashPattern)&&(r=e.match(a.hash),r&&s(r),u.hashParams=r?r.namedParams:{}),u},t.fromString=function(r){var e=o(r),n=e.path,i=e.queryString||r.indexOf("?")>-1,s=e.hash||r.indexOf("#")>-1;return new t({pathPattern:n&&u.fromString(e.path),queryStringPattern:i&&a.fromString(e.queryString),hashPattern:s&&u.fromString(e.hash),routeString:r})},t}();t.exports=c,c.QueryStringPattern=a,c.PathPattern=u,c.RegExpPattern=s},function(t,r,e){"use strict";r.decode=r.parse=e(5),r.encode=r.stringify=e(6)},function(t,r){"use strict";function e(t,r){return Object.prototype.hasOwnProperty.call(t,r)}t.exports=function(t,r,o,i){r=r||"&",o=o||"=";var a={};if("string"!=typeof t||0===t.length)return a;var u=/\+/g;t=t.split(r);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=t.length;s>0&&c>s&&(c=s);for(var h=0;c>h;++h){var f,p,l,m,d=t[h].replace(u,"%20"),g=d.indexOf(o);g>=0?(f=d.substr(0,g),p=d.substr(g+1)):(f=d,p=""),l=decodeURIComponent(f),m=decodeURIComponent(p),e(a,l)?n(a[l])?a[l].push(m):a[l]=[a[l],m]:a[l]=m}return a};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,r){"use strict";function e(t,r){if(t.map)return t.map(r);for(var e=[],n=0;n<t.length;n++)e.push(r(t[n],n));return e}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,r,a,u){return r=r||"&",a=a||"=",null===t&&(t=void 0),"object"==typeof t?e(i(t),function(i){var u=encodeURIComponent(n(i))+a;return o(t[i])?e(t[i],function(t){return u+encodeURIComponent(n(t))}).join(r):u+encodeURIComponent(n(t[i]))}).join(r):u?encodeURIComponent(n(u))+a+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var r=[];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r}}])});